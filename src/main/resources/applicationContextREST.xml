<!-- <beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:cxf="http://cxf.apache.org/core"
	xmlns:jaxws="http://cxf.apache.org/jaxws"
	xmlns:jaxrs="http://cxf.apache.org/jaxrs"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans	http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd
		http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
		http://cxf.apache.org/jaxws	http://cxf.apache.org/schemas/jaxws.xsd
		http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
	"> -->

<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:cxf="http://cxf.apache.org/core"
       xmlns:jaxws="http://cxf.apache.org/jaxws"
       xmlns:jaxrs="http://cxf.apache.org/jaxrs"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
           http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
           http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
           http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
       ">

	
	
	<!-- <bean class="org.ServletContextConfig"/> -->
	
	<bean id="oauthProvider" class="ca.openosp.openo.login.OscarOAuthDataProvider" autowire="byName"/>

	<bean id="requestTokenService" class="ca.openosp.openo.login.OscarRequestTokenService">
	   <property name="dataProvider" ref="oauthProvider"/>
	</bean>
	
	<bean id="oAuthFilter" class="org.apache.cxf.rs.security.oauth.filters.OAuthRequestFilter">
         <property name="dataProvider" ref="oauthProvider"/>
         <property name="useUserSubject" value="true"/>
         <property name="supportUnknownParameters" value="true"/>
     </bean>

	<bean id="authorizationService" class="org.apache.cxf.rs.security.oauth.services.AuthorizationRequestService">
		<property name="dataProvider" ref="oauthProvider"/>
	</bean>
     
     <bean id="dispatchProvider" class="org.apache.cxf.jaxrs.provider.RequestDispatcherProvider">
      <property name="resourcePath" value="/login/3rdpartyLogin.jsp"/>
	 </bean>
	      
	<bean id="accessTokenService" class="org.apache.cxf.rs.security.oauth.services.AccessTokenService">
	  <property name="dataProvider" ref="oauthProvider"/>
	</bean>
	
	
	<bean id="jacksonObjectMapper" class="com.fasterxml.jackson.databind.ObjectMapper">
		<property name="serializationInclusion" value="NON_NULL"/>
	</bean>

	<bean id="jsonProvider" class="org.codehaus.jackson.jaxrs.JacksonJsonProvider">
    	<!-- <property name="mapper" ref="jacksonObjectMapper"/> -->
	</bean>
	
	
    <jaxrs:server id="oauthService" address="/oauth" >

        <jaxrs:serviceBeans>
            <ref bean="requestTokenService"/>
            <ref bean="accessTokenService"/>
            <ref bean="authorizationService"/>
        </jaxrs:serviceBeans>
         
        <jaxrs:providers>
      		<ref bean="dispatchProvider"/>
   		</jaxrs:providers> 
      
        <jaxrs:extensionMappings>
            <entry key="xml" value="application/xml" />         
        </jaxrs:extensionMappings>
        
    </jaxrs:server>

    <jaxrs:server id="restServices" address="/services">

		<jaxrs:inInterceptors>
			<bean name="oauthInInterceptor"
				class="ca.openosp.openo.webserv.oauth.util.OAuthInterceptor" />
		</jaxrs:inInterceptors>

        <jaxrs:serviceBeans>
			<bean class="ca.openosp.openo.webserv.oauth.OAuthStatusService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.csrf.CsrfTokenService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.PharmacyService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.DemographicService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.ScheduleService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.DemographicMergeService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.MessagingService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.InboxService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.TicklerWebService" autowire="byName"/>
            <bean class="ca.openosp.openo.webserv.rest.RxWebService" autowire="byName"/>
            <bean class="ca.openosp.openo.webserv.rest.RxLookupService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.ProviderService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.PatientDetailStatusService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.PersonaService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.FormsService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.OscarJobService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.NotesService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.ProductDispensingService" autowire="byName"/>
			<bean class="ca.openosp.openo.webserv.rest.RecordUxService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.ReportingService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.BillingService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.StatusService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.ProgramService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.ConsultationWebService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.AppService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.AllergyService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.PreventionService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.ReportByTemplateService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.ResourceService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.DiseaseRegistryService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.LabService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.MeasurementService" autowire="byName" />
			<bean class="ca.openosp.openo.webserv.rest.DocumentService" autowire="byName" />
        </jaxrs:serviceBeans>
             
        <jaxrs:providers>
           <ref bean="oAuthFilter"/>
           <ref bean="jaxb"/>
           <ref bean="jsonProvider"/>
        </jaxrs:providers>
      
      
        <jaxrs:extensionMappings>
            <entry key="xml" value="application/xml" />
            <entry key="json" value="application/json" />
        </jaxrs:extensionMappings>
    </jaxrs:server>
<context:component-scan base-package="ca.openosp.openo.login" />

</beans>
